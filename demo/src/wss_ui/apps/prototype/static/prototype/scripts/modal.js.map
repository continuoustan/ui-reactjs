{"version":3,"sources":["modal.js"],"names":["modal","title","content","actions","options","$","show","undefined","ret","append","xx","opt","JSON","stringify","type","name","document","on","hide","result","data","console","log","opts","modalClosed","CustomEvent","detail","window","dispatchEvent","remove","modal_alert","confirm_string","modal_prompt","modal_confirm","t","mode","confirm"],"mappings":"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","file":"modal.js","sourcesContent":["function modal(title, content, actions, options){\n    $(\"#overlay\").show();\n    if (options === undefined)\n        options = {};\n    var ret = $(\"<div class='modal' />\");\n    ret.append(\"<div class='header'>\"+title+\"</div>\");\n    ret.append(\"<div class='body'>\"+content+\"</div>\");\n    var xx = \"<div class='footer'>\";\n    for(let opt of actions){\n        xx +=\"<button class='wfp-btn pull-right modal-btn' data-modal-options=\"+JSON.stringify(options)+\" data-modal-result='\"+opt.type+\"'>\"+opt.name+\"</button>\";\n    }\n    xx += \"</div>\";\n    ret.append(xx);\n    $(\"#overlay\").append(ret);\n}\n\n$(document).on(\"click\", \".modal-btn\", function(){\n    $(\"#overlay\").hide();\n    var result = $(this).data(\"modal-result\");\n    console.log(result);\n    var opts = $(this).data(\"modal-options\");\n    console.log(opts);\n    let modalClosed = new CustomEvent(\"modalclosed\", {detail:{result:result, options:opts}});\n    window.dispatchEvent(modalClosed);\n    $(\".modal\").remove();\n});\n\nfunction modal_alert(title, content, confirm_string, options){\n    return modal(title, content, [\n        {name: confirm_string, type:\"confirm\"},\n    ], options);\n}\n\nfunction modal_prompt(title, content, confirm_string, options){\n    return modal(title, content, [\n        {name:\"Cancel\", type:\"cancel\"},\n        {name: confirm_string, type:\"confirm\"},\n    ], options);\n}\n\nfunction modal_confirm(title, content, confirm_string, options){\n    return modal(title, content, [\n        {name: confirm_string, type:\"confirm\"},\n        {name:\"Cancel\", type:\"cancel\"}\n    ], options);\n}\n\n\n\n$(document).on(\"click\", \".modal-trigger\", function(){\n    var t = $(this);\n    var mode = t.data(\"modal-mode\");\n    var title = t.data(\"modal-title\");\n    var content = t.data(\"modal-content\");\n    var confirm = t.data(\"modal-confirm\");\n    var options = t.data(\"modal-options\");\n    var actions = t.data(\"modal-actions\");\n    \n    switch (mode) {\n        case \"alert\":\n            modal_alert(title,content,confirm, options);\n            break;\n        case \"prompt\":\n            modal_prompt(title,content,confirm, options);\n            break;\n        case \"confirm\":\n            modal_confirm(title,content,confirm, options);\n            break;\n    \n        default:\n            modal(title,content,actions,options);\n            break;\n    }\n\n});"]}